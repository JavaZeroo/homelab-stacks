# 配置 /vault/ 路径的处理
location /vault/ {
    # 确保 HTTP 协议版本为 1.1，支持 WebSocket
    proxy_http_version 1.1;
    # 设置 Upgrade 和 Connection 头部，支持 WebSocket
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection $connection_upgrade;

    # 设置一些必要的头部信息
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;

    # 代理请求到后端的服务（例如 Vaultwarden 或其他应用）
    proxy_pass http://192.168.3.217:8880;  # 根据实际后端地址修改

    # 允许大文件上传，最大请求体为 100M
    client_max_body_size 100M;

    # 可选的额外认证机制（如果需要）
    # auth_basic "Restricted Access";
    # auth_basic_user_file /etc/nginx/.htpasswd;
}
